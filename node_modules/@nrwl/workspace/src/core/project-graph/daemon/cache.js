"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.deleteDaemonJsonCache = exports.writeDaemonJsonCache = exports.readDaemonJsonCache = void 0;
const tslib_1 = require("tslib");
const fs_extra_1 = require("fs-extra");
const path_1 = require("path");
const nx_deps_cache_1 = require("../../nx-deps/nx-deps-cache");
const daemonJsonPath = path_1.join(nx_deps_cache_1.nxDepsDir, 'daemon.json');
function readDaemonJsonCache() {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        nx_deps_cache_1.ensureCacheDirectory();
        if (!fs_extra_1.existsSync(daemonJsonPath)) {
            return null;
        }
        return yield fs_extra_1.readJson(daemonJsonPath);
    });
}
exports.readDaemonJsonCache = readDaemonJsonCache;
function writeDaemonJsonCache(daemonJson) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        nx_deps_cache_1.ensureCacheDirectory();
        yield fs_extra_1.writeJson(daemonJsonPath, daemonJson);
    });
}
exports.writeDaemonJsonCache = writeDaemonJsonCache;
function deleteDaemonJsonCache() {
    try {
        fs_extra_1.unlinkSync(daemonJsonPath);
    }
    catch (_a) { }
}
exports.deleteDaemonJsonCache = deleteDaemonJsonCache;
//# sourceMappingURL=cache.js.map